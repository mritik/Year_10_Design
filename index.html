<html>

    <head>
        <link rel="stylesheet" href="mystyles.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <script src="jquery-3.4.0.min.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    </head>
    


    <body onload="displayInitial(), displayInitial2(), invokeShowTopNews()">
        

        <section class="searchArea">
            
            <div class="searchContainer">

                <input type="text" placeholder="Search Tweets..." defaultValue="Elon Musk" name="search" id="searchText"> 
                <button class= "searchBtn" type = submit id="searchTweetsBtn" onclick="invokeSearchTweets(searchText)"><i class = "fa fa-search"></i></button>

                
                    <div class="searchCard" id="searchCard">

                    </div>
                
            </div>
        
        </section>
    

        
       
            
    <h1><b>Media News</b></h1>
        
        
    
            

        <section class="infoCards">
            
           <div class="infoCard1" id="infoCard1">
               
              <div class="container">
                <h4><b>Top News</b></h4>
               
                <span id="initial"></span>
                <span id="more">
               
                </span>
                <button onclick="displayMore()" id= "button">Read More</button>
                
              </div>
               
            </div>

             <div class="infoCard2" id="infoCard2">
               
              <div class="container">
                <h4><b>Personalized News</b></h4>
                <p>Headline 1</p>
                <p>Headline 2</p>
                <p>Headline 3</p>
                <p>Headline 4</p>
                <p>Headline 5</p>
                <span id="initial2"></span>
                <span id="more2">
                <p>Headline 6</p>
                <p>Headline 7</p>
                <p>Headline 8</p>
                <p>Headline 9</p>
                <p>Headline 10</p>
                </span>
                <button onclick= "displayMore2()" id= "button2">Read More</button>
              </div>
               
            </div>
            
        </section>
       
        
         <section class="navArea">
             
            <nav id="nav1">
               <ul>
                   <li><a class="active" href="index.html">Home</a></li>
                   <li><a href="page1.html">Sports</a></li>
                   <li><a href="page2.html">Criminal</a></li>
                   <li><a href="page3.html">Politics</a></li>
                   <li><a href="page4.html">World News</a></li>
                   <li><a href="page5.html">Innovations</a></li>
                   <li><a href="page6.html">Local</a></li>
               </ul>
            </nav>
        </section>
        
        
        <script>
            
            function invokeShowTopNews() {
                var url = "http://localhost:8080/ExecCommand?command=ShowTopNews"
                const Http = new XMLHttpRequest();

                //alert("URL is : " + url);
                console.log("Invoking Http Get for URL=" + url);
                
                Http.open("GET", url);
                Http.send();

                Http.onreadystatechange = (e) => {
                  console.log("HttpResp -->" + Http.responseText)
                  infoCard1.innerHTML = Http.responseText;
                }
            }
             
            function invokeSearchTweets(inputText) {
                var urlPrefix = "http://localhost:8080/ExecCommand?command=SearchTweets&queryExpr="
                const Http = new XMLHttpRequest();
                const url = encodeURI(urlPrefix + inputText.value);
                
                //alert("URL is : " + url);
                console.log("Invoking Http Get for URL=" + url);
                
                Http.open("GET", url);
                Http.send();

                Http.onreadystatechange = (e) => {
                  console.log("HttpResp -->" + Http.responseText)
                  searchCard.innerHTML = Http.responseText;
                }
            }
            
            function displayInitial() {
              var moreText = document.getElementById("more");
              var buttonText = document.getElementById("button");
              buttonText.innerHTML = "More"; 
              moreText.style.display = "none";
            }
            
            function displayInitial2() {
              var moreText2 = document.getElementById("more2");
              var buttonText2 = document.getElementById("button2");
              buttonText2.innerHTML = "More"; 
              moreText2.style.display = "none";
            }
            
            function displayMore() {
              var moreText = document.getElementById("more");
              var buttonText = document.getElementById("button");

              if (initial.style.display === "none") {
                initial.style.display = "inline";
                buttonText.innerHTML = "More"; 
                moreText.style.display = "none";
              } else {
                initial.style.display = "none";
                buttonText.innerHTML = "Less"; 
                moreText.style.display = "inline";
              }
            }
            
            function displayMore2() {
              var moreText2 = document.getElementById("more2");
              var buttonText2 = document.getElementById("button2");

              if (initial2.style.display === "none") {
                initial2.style.display = "inline";
                buttonText2.innerHTML = "More"; 
                moreText2.style.display = "none";
              } else {
                initial2.style.display = "none";
                buttonText2.innerHTML = "Less"; 
                moreText2.style.display = "inline";
              }
            }
        </script>
        
    </body>

</html>

